@using Domain
@using Microsoft.Web.Mvc;

@section page_title{
Send message
}

@{
    Html.RenderPartial("_SubNavigation");
    Html.RenderPartial("_EmptySideBar");
}

<script type="text/javascript">
    Ext.onReady(function () {
        window.feature = {};

        window.feature.container = Ext.create('Ext.container.Container', {
            margin: '45 50 20 20',
            padding: '20 20 0 20',
            id: 'TopContainer',
            layout: {
                align: 'stretch',
                type: 'vbox'
            },
            items: [{
                xtype: 'button',
                margin: '0 0 0 20',
                ui: 'snapshot-add-btn',
                cls: 'x-add-button-gradient',
                text: 'Send message',
                handler: function () {
                    var values = { message: "ABF230487F S1" };
                    var postToUrl = '@Url.RouteUrl(Web.Bootstrap.Routes.DefaultRouteRegistrar.DEFAULT_ROUTE, new { controller = "SendMessage", action = "Send" })';
                    var action = $.post(postToUrl, values);

                    action.success(function (serverResponse) {
                        var msgAlert = Ext.Msg;
                        msgAlert.ui = 'snapshot-popup-window';
                        msgAlert.msgButtons['ok'].ui = 'snapshot-add-btn';
                        msgAlert.msgButtons['ok'].margin = '10 10 20 0';

                        msgAlert.alert(serverResponse.Status, serverResponse.Message);
                    });
                }
            }, {
                xtype: 'button',
                margin: '0 0 0 20',
                ui: 'snapshot-add-btn',
                cls: 'x-add-button-gradient',
                text: 'Send xml',
                handler: function () {
                    var values = { message: "ABF230487F S1" };
                    var postToUrl = '@Url.RouteUrl(Web.Bootstrap.Routes.DefaultRouteRegistrar.DEFAULT_ROUTE, new { controller = "SendMessage", action = "SendXml" })';
                    var action = $.post(postToUrl, values);

                    action.success(function (serverResponse) {
                        var msgAlert = Ext.Msg;
                        msgAlert.ui = 'snapshot-popup-window';
                        msgAlert.msgButtons['ok'].ui = 'snapshot-add-btn';
                        msgAlert.msgButtons['ok'].margin = '10 10 20 0';

                        msgAlert.alert(serverResponse.Status, serverResponse.Message);
                    });
                }
            }]
        });

        var contentRes = window.res.content;
        var mainContent = Ext.getCmp(contentRes.maincontent.id);

        mainContent.add(window.feature.container);
    });

    </script>    